---
description: "프로젝트 변경에 따른 CLAUDE.md 생성 또는 갱신"
allowed-tools:
  [
    "Read",
    "Write",
    "Glob",
    "Grep",
    "Bash(git diff:*)",
    "Bash(git log:*)",
    "Bash(git status:*)",
    "Bash(ls:*)",
    "Bash(wc:*)",
  ]
---

# Claude 명령어: Update Docs

프로젝트의 현재 코드 상태를 분석하여 `CLAUDE.md` 문서를 생성하거나 갱신합니다.

## 사용법

```
/update-docs
```

## 중요 규칙

- `.env.local`, `.env` 등 환경변수 파일의 **실제 값은 절대 포함하지 않는다** (키 이름만 기록)
- 기존 `CLAUDE.md`의 사용자 메모나 커스텀 섹션은 최대한 보존한다
- 모든 내용은 코드에서 직접 추출한 사실에 기반한다

## 프로세스

### 1단계: 현재 상태 확인

- 프로젝트 루트에 `CLAUDE.md`가 존재하는지 확인한다
- 존재하면 기존 내용을 읽어둔다
- `git status`와 `git log --oneline -20`으로 최근 변경 이력을 파악한다

### 2단계: 프로젝트 정보 수집

아래 항목들을 코드에서 직접 추출한다:

**기본 정보:**

- `package.json` — 프로젝트명, 버전, 스크립트, 의존성
- `tsconfig.json` — TypeScript 설정, path alias
- `next.config.*` — Next.js 설정

**프로젝트 구조:**

- `src/` 디렉토리 구조 파악 (app, components, lib, hooks, types 등)
- 주요 라우트 목록 (app 디렉토리 기반)
- 컴포넌트 계층 구조

**코드 패턴:**

- 서버/클라이언트 컴포넌트 분리 패턴 (`"use client"` 사용 위치)
- 데이터 페칭 패턴 (Notion API, 캐싱 전략)
- 스타일링 패턴 (Tailwind CSS, CSS Modules 등)
- 애니메이션 패턴 (framer-motion 등)
- 배럴 익스포트 패턴

**환경 변수:**

- `.env.example` 또는 `.env.local` 파일에서 필요한 **키 이름만** 추출
- 각 키의 용도를 코드 사용처로부터 유추하여 설명

**개발 규칙:**

- 코드 주석 언어, 커밋 메시지 언어 등 컨벤션
- 네이밍 패턴 (컴포넌트, 파일, 변수)

### 3단계: CLAUDE.md 생성/갱신

**신규 생성 시** 아래 구조로 작성한다:

```markdown
# 프로젝트명

## 개요

한 줄 프로젝트 설명

## 기술 스택

- 프레임워크, 라이브러리, 도구 목록

## 프로젝트 구조

주요 디렉토리와 파일 설명

## 개발 명령어

npm scripts 목록과 설명

## 코드 패턴 및 규칙

프로젝트에서 사용하는 핵심 패턴

## 환경 변수

필요한 환경변수 키와 용도 (값은 미포함)

## 참고사항

기타 중요한 정보
```

**기존 파일 갱신 시:**

- `git diff HEAD~10` 또는 최근 변경사항을 분석한다
- 변경된 부분에 해당하는 섹션만 업데이트한다
- 사용자가 수동으로 추가한 메모나 섹션은 보존한다
- 갱신된 내용에 주석으로 `<!-- 자동 갱신: YYYY-MM-DD -->` 표시하지 않는다

### 4단계: 결과 보고

갱신 완료 후 변경 요약을 출력한다:

```
## 📝 CLAUDE.md 갱신 완료

- 상태: 신규 생성 / 갱신
- 변경된 섹션: ...
- 추가된 항목: ...
- 보존된 사용자 메모: 있음/없음
```

## 참고사항

- 이 명령어는 `CLAUDE.md`만 생성/수정하며, 다른 파일은 변경하지 않는다
- 프로젝트가 커서 분석에 시간이 걸릴 수 있다
- 생성된 문서는 Claude Code가 프로젝트를 이해하는 데 활용된다
